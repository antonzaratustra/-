<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mentorist Basic test</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KyZXEAg3QhqLMpG8r+Knujsl7/1L_dstPt3HV5HzF6Gvk/e3s4Wz6iJgD/+ub2oU" crossorigin="anonymous">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
    <link href="https://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js'></script>
    <script src='js/jquery.svg3dtagcloud.min.js'></script>

    <link href='https://fonts.googleapis.com/css?family=Oswald&subset=latin,latin-ext' rel='stylesheet' type='text/css'>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="app.js"></script>

</head>

<body>
    <div class="container">
        <div class="screen active" id="screen1">
            <h1 class="test-title">Un monstre gai vaut mieux qu'un sentimental ennuyeux</h1>
            <div class="description-container">
                <p class="test-description">За изображением рычажных весов Фемиды, символа справедливости и равновесия,
                    скрывается тест самопознания, который может помочь тебе определить свои ключевые ценности и
                    приоритеты в жизни. Так же как весы Фемиды символизируют равновесие и справедливость, этот тест
                    может помочь тебе найти баланс между различными аспектами жизни и сделать выбор в пользу того, что
                    действительно важно для тебя.</p>
            </div>
            <div class="img-container">
                <img src="Img/lever-scales-of-justice-in-sparta-style.png" alt="Изображение теста"
                    class="test-image mx-auto d-block">
                <!-- <img src="Img/spartan-warrior.png" alt="Left image" class="bottom-left-image"> -->
                <!-- <img src="Img/spartan-pretty-women-warrior.png" alt="Right image" class="bottom-right-image"> -->
                <!-- <div class="jquery-script-clear"></div>
            </div>
        </div>
        <div id='tag-cloud'></div> -->


                <div class="description-container">
                    <p class="test-description">Путь к самопознанию и осознанному выбору начинается здесь, за весами
                        Фемиды. Тест поможет тебе найти баланс между различными аспектами жизни и сделать выбор в пользу
                        того, что действительно важно для тебя.</p>
                </div>


                <button class="btn btn-light start-test-btn mx-auto d-block" onclick="showScreen('screen2')">Начать
                    тест</button>
            </div>
        </div>

        <!-- Screen 2 -->
        <div class="screen" id="screen2">
            <h2>Ситуация</h2>
            <p class="value-description test-description"></p>
            <h3>Вопрос</h3>
            <p class="value-question"></p>
            <div id="timer">60</div>
            <div class="answer-block">
                <div class="answer-option left"
                    onclick="selectAnswer(currentSituation['answer-option-left']['values'])">
                    <p class="test-description"></p>
                </div>
                <div class="answer-option right"
                    onclick="selectAnswer(currentSituation['answer-option-right']['values'])">
                    <p class="test-description"></p>
                </div>
            </div>
            <div id="value-block" class="d-none">
                <h3>Почему вы ответили именно так? Выберите самую важную ценность:</h3>
                <div id="value-items"></div>
            </div>
        </div>
        <!-- End Screen 2 -->

















        <!-- Screen 8 -->
        <div class="screen" id="screen8">

            <h2>"Ваши ценности:"</h2>

            <div class="value-results" id="value-results">
            </div>

        </div>





    </div>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz4fnFO9gybBud7TlRbs/ic4AwGcFZOxg5DpPt8EgeUIgIwzjWfXQKWA3"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <script>






























        const situations = [
            {
                "value-description": "Ты узнал, что у твоего лучшего друга рак в последней стадии, и ему осталось жить не более полугода. Он просит тебя помочь ему умереть достойно и без страданий, используя эвтаназию. Он знает, что это противозаконно в вашей стране, и что ты рискуешь попасть в тюрьму, но он готов принять этот риск, чтобы избежать мучительной смерти. Ты знаешь, что это тяжелое решение, и что это может повлиять на твою жизнь и жизнь твоих близких, но ты также знаешь, что это твой лучший друг, и что ты хочешь помочь ему в этот трудный момент.",
                "value-question": "Что ты выберешь: помочь своему другу умереть достойно, используя эвтаназию, или отказать ему в этой просьбе, сославшись на закон и риск для себя?",
                "answer-option-left": {
                    "test-description": "Помочь другу умереть достойно, используя эвтаназию",
                    "values": ["лояльность", "сострадание", "свобода выбора", "достоинство"]
                },
                "answer-option-right": {
                    "test-description": "Отказать другу в этой просьбе, сославшись на закон и риск для себя",
                    "values": ["законность", "ответственность", "самосохранение", "уважение к жизни"]
                }
            },
            {
                "value-description": "Ты увидел, как твой начальник присвоил себе твою идею и получил за нее повышение. Ты знаешь, что это несправедливо, но боишься, что если ты об этом расскажешь, то можешь потерять работу. Ты также знаешь, что если ничего не предпринимать, то это может продолжаться и в будущем.",
                "value-question": "Что ты выберешь: сохранить работу и молчать, или постоять за справедливость и рискнуть потерять работу?",
                "answer-option-left": {
                    "test-description": "Сохранить работу и молчать",
                    "values": ["безопасность", "лояльность", "самосохранение", "уважение к власти"]
                },
                "answer-option-right": {
                    "test-description": "Постоять за справедливость и рискнуть потерять работу",
                    "values": ["справедливость", "честность", "ответственность", "мужество"]
                }
            },
            {
                "value-description": "Ты узнал, что твой друг регулярно бьет свою жену. Он просит тебя не говорить никому об этом, так как боится, что его арестуют и он потеряет работу. Ты знаешь, что это неправильно, но боишься, что если ты расскажешь об этом властям, то можешь потерять дружбу и подвергнуть опасности себя и свою семью.",
                "value-question": "Что ты выберешь: сохранить дружбу и молчать, или постоять за права женщины и рискнуть потерять дружбу?",
                "answer-option-left": {
                    "test-description": "Сохранить дружбу и молчать",
                    "values": ["лояльность", "дружба", "самосохранение", "уважение к личному пространству"]
                },
                "answer-option-right": {
                    "test-description": "Постоять за права женщины и рискнуть потерять дружбу",
                    "values": ["справедливость", "защита прав человека", "ответственность", "мужество"]
                }
            },
            {
                "value-description": "Ты работаешь в компании, которая загрязняет окружающую среду. Ты знаешь, что это вредно для природы и здоровья людей, но боишься, что если ты об этом расскажешь, то можешь потерять работу и подвергнуть опасности себя и свою семью. Ты также знаешь, что если ничего не предпринимать, то это может продолжаться и в будущем.",
                "value-question": "Что ты выберешь: сохранить работу и молчать, или постоять за защиту окружающей среды и рискнуть потерять работу?",
                "answer-option-left": {
                    "test-description": "Сохранить работу и молчать",
                    "values": ["безопасность", "лояльность", "самосохранение", "уважение к власти"]
                },
                "answer-option-right": {
                    "test-description": "Постоять за защиту окружающей среды и рискнуть потерять работу",
                    "values": ["экологичность", "ответственность", "мужество", "защита будущих поколений"]
                }
            }


            // добавьте другие ситуации
        ];

        const values = {}; // объект, в котором будем хранить значения ценностей





        function showResults() {
            // Получаем все ценности и сортируем их по убыванию значения value
            const valuesArray = Object.entries(values).sort((a, b) => b[1] - a[1]);

            // Ограничиваем количество ценностей до 10
            const topValues = valuesArray.slice(0, 10);

            // Получаем div с классом value-results
            const valueResults = document.querySelector('.value-results');

            // Очищаем содержимое value-results
            valueResults.innerHTML = '';

            // Выводим каждую ценность в value-results
            topValues.forEach(([value, count], index) => {
                const valueElement = document.createElement('div');
                valueElement.textContent = value;
                valueElement.style.opacity = 1 - index / 10; // Задаем прозрачность в диапазоне от 1 до 0
                valueResults.appendChild(valueElement);
            });
        }





        let currentSituationIndex = 0;
        let currentSituation = situations[currentSituationIndex];

        function showScreen(id) {
            console.log('Show screen:', id);
            // Скрываем все экраны
            var screens = document.getElementsByClassName('screen');
            for (var i = 0; i < screens.length; i++) {
                screens[i].classList.remove('active');
            }
            // Показываем нужный экран
            var screen = document.getElementById(id);
            if (screen) {
                screen.classList.add('active');
            } else {
                console.log('Screen not found:', id);
            }
            // Скрываем блок с ценностями, если переходим на экран 2
            if (id === 'screen2') {
                document.getElementById('value-block').classList.add('d-none');
            }

            if (id === 'screen8') {
                showResults();
            }


        }

        function selectAnswer(valuesToIncrease) {
            $('.answer-option').addClass('disabled');

            valuesToIncrease.forEach(value => {
                if (values[value]) {
                    values[value]++;
                } else {
                    values[value] = 1;
                }
            });

            const valueBlock = document.getElementById('value-block');
            valueBlock.style.display = 'flex'; // добавляем свойство display: flex
            valueBlock.innerHTML = '';
            valuesToIncrease.forEach(value => {
                const valueElement = document.createElement('div');
                valueElement.textContent = value;
                valueElement.classList.add('value-item');
                valueElement.addEventListener('click', function () {
                    values[value]++;
                    $(this).removeClass('value-item');
                    $('.answer-option').removeClass('disabled');
                    currentSituationIndex++;
                    if (currentSituationIndex < situations.length) {
                        currentSituation = situations[currentSituationIndex];
                        showSituation();
                    } else {
                        showScreen('screen8');
                    }
                });
                valueBlock.appendChild(valueElement);
            });
        }

        function showSituation() {

            document.getElementById('value-block').style.display = 'none';

            const currentSituation = situations[currentSituationIndex];

            document.querySelector('.value-description.test-description').textContent = currentSituation["value-description"];
            document.querySelector('.value-question').textContent = currentSituation["value-question"];
            document.querySelector('.answer-option.left .test-description').textContent = currentSituation["answer-option-left"]["test-description"];
            document.querySelector('.answer-option.right .test-description').textContent = currentSituation["answer-option-right"]["test-description"];

            const answerOptionLeft = document.querySelector('.answer-option.left');
            const answerOptionRight = document.querySelector('.answer-option.right');

            answerOptionLeft.classList.remove('disabled');
            answerOptionRight.classList.remove('disabled');

            answerOptionLeft.addEventListener('click', () => {
                selectAnswer(currentSituation["answer-option-left"]["values"]);
            });

            answerOptionRight.addEventListener('click', () => {
                selectAnswer(currentSituation["answer-option-right"]["values"]);
            });

            let timeLeft = 60;
            const timerInterval = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').textContent = timeLeft;

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    selectAnswer(currentSituation["answer-option-left"]["values"]); // выбираем левый вариант ответа, если время истекло
                }
            }, 1000);
        }

        // showScreen('screen2');
        showSituation();


    </script>
</body>

</html>